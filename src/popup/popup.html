<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PR AI Review Settings</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="popup">
    <header class="header">
      <div class="header__logo">
        <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
        </svg>
        <h1>PR AI Review</h1>
      </div>
      <div id="connection-status" class="status status--checking">
        <span class="status__dot"></span>
        <span class="status__text">Checking...</span>
      </div>
    </header>

    <main class="main">
      <section class="section">
        <h2 class="section__title">AI Providers</h2>
        <p class="section__description">
          Configure one or more AI providers for code reviews. Enable multiple providers for consensus-based suggestions with confidence scoring.
        </p>

        <div class="form-group">
          <label class="label">Active Providers</label>
          <div class="checkbox-group">
            <label class="checkbox">
              <input type="checkbox" id="provider-gemini" value="gemini">
              <span class="checkbox__label">Gemini</span>
            </label>
            <label class="checkbox">
              <input type="checkbox" id="provider-claude" value="claude">
              <span class="checkbox__label">Claude</span>
            </label>
          </div>
        </div>

        <div class="form-group">
          <label class="label" for="gemini-api-key">Gemini API Key</label>
          <p class="section__description" style="margin-bottom: 8px;">
            Get your API key from <a href="https://aistudio.google.com/apikey" target="_blank">Google AI Studio</a>.
          </p>
          <div class="input-group">
            <input
              type="password"
              id="gemini-api-key"
              class="input"
              placeholder="AIza..."
            >
            <button id="toggle-gemini-key" class="btn btn--icon" title="Show/Hide API key">
              <svg id="gemini-eye-icon" viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                <circle cx="12" cy="12" r="3"/>
              </svg>
            </button>
          </div>
        </div>

        <div class="form-group">
          <label class="label" for="claude-api-key">Claude API Key</label>
          <p class="section__description" style="margin-bottom: 8px;">
            Get your API key from <a href="https://console.anthropic.com/settings/keys" target="_blank">Anthropic Console</a>.
          </p>
          <div class="input-group">
            <input
              type="password"
              id="claude-api-key"
              class="input"
              placeholder="sk-ant-..."
            >
            <button id="toggle-claude-key" class="btn btn--icon" title="Show/Hide API key">
              <svg id="claude-eye-icon" viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                <circle cx="12" cy="12" r="3"/>
              </svg>
            </button>
          </div>
        </div>
      </section>

      <section class="section">
        <h2 class="section__title">Review Settings</h2>

        <div class="form-group">
          <label class="label" for="strictness">Review Strictness</label>
          <select id="strictness" class="select">
            <option value="quick">Quick - Focus on critical issues only</option>
            <option value="balanced">Balanced - Standard code review</option>
            <option value="thorough">Thorough - Comprehensive analysis</option>
          </select>
        </div>

        <div class="form-group">
          <label class="label">Focus Areas</label>
          <div class="checkbox-group">
            <label class="checkbox">
              <input type="checkbox" id="focus-all" value="all">
              <span class="checkbox__label">All Areas</span>
            </label>
            <label class="checkbox">
              <input type="checkbox" id="focus-security" value="security">
              <span class="checkbox__label">Security</span>
            </label>
            <label class="checkbox">
              <input type="checkbox" id="focus-performance" value="performance">
              <span class="checkbox__label">Performance</span>
            </label>
            <label class="checkbox">
              <input type="checkbox" id="focus-style" value="style">
              <span class="checkbox__label">Code Style</span>
            </label>
          </div>
        </div>

        <div class="form-group">
          <label class="label">Context Settings</label>
          <div class="checkbox-group" style="display: flex; flex-direction: column; gap: 8px;">
            <label class="checkbox">
              <input type="checkbox" id="context-repo-summary">
              <span class="checkbox__label">Include repo summary (README)</span>
            </label>
            <label class="checkbox">
              <input type="checkbox" id="context-related-files">
              <span class="checkbox__label">Include related files (imports)</span>
            </label>
            <label class="checkbox">
              <input type="checkbox" id="context-deduplicate">
              <span class="checkbox__label">Skip discussed issues</span>
            </label>
          </div>
        </div>

        <div class="form-group">
          <label class="toggle">
            <input type="checkbox" id="auto-review">
            <span class="toggle__slider"></span>
            <span class="toggle__label">Auto-review on PR load</span>
          </label>
        </div>

        <div class="form-group">
          <label class="toggle">
            <input type="checkbox" id="auto-finalize">
            <span class="toggle__slider"></span>
            <span class="toggle__label">Auto-finalize reviews (submit immediately)</span>
          </label>
          <p class="section__description" style="margin-top: 4px; font-size: 11px;">
            When disabled, reviews are saved as drafts for you to submit manually from GitHub.
          </p>
        </div>
      </section>

      <section class="section">
        <h2 class="section__title">GitHub Token</h2>
        <p class="section__description">
          Required for private repositories. Token needs <code>repo</code> scope.
        </p>
        <div class="form-group">
          <div class="input-group">
            <input
              type="password"
              id="github-token"
              class="input"
              placeholder="ghp_xxxxxxxxxxxxxxxxxxxx"
            >
            <button id="toggle-token" class="btn btn--icon" title="Show/Hide token">
              <svg id="eye-icon" viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                <circle cx="12" cy="12" r="3"/>
              </svg>
            </button>
          </div>
          <button id="validate-token" class="btn btn--secondary btn--small">
            Validate Token
          </button>
          <div id="token-status" class="token-status"></div>
        </div>
      </section>

      <section class="section">
        <h2 class="section__title">Appearance</h2>
        <div class="form-group">
          <label class="label" for="theme">Theme</label>
          <select id="theme" class="select">
            <option value="auto">Auto (match GitHub)</option>
            <option value="light">Light</option>
            <option value="dark">Dark</option>
          </select>
        </div>
      </section>
    </main>

    <footer class="footer">
      <button id="save-btn" class="btn btn--primary">Save Settings</button>
      <span id="save-status" class="save-status"></span>
    </footer>
  </div>

  <script src="popup.js"></script>
</body>
</html>
